
---
title: "07. REDCap API"
output:
  html_document:
    toc: true
---


```{r}
 #options(repos = c(CRAN = "https://packagemanager.posit.co/cran/__linux__/focal/latest"))
 options(repos = c(CRAN = "https://packagemanager.posit.co/cran/__linux__/jammy/latest"))
 
 options()$repos
  
 r_lib_path <- "/dbfs/R/library"
 .libPaths(c(r_lib_path, .libPaths()))

pacman::p_load(
  REDCapR,
  dplyr
)
```


```{r}
redcap_uri <- "https://redcap-dev-2.ouhsc.edu/redcap/api/"
token      <- "9A068C425B1341D69E83064A2D273A70"

post_body <- list(
  token           = token,
  content         = 'record',
  format          = 'csv',
  type            = 'flat'
)

raw_text <- httr::POST(
  url             = redcap_uri,
  body            = post_body,
  httr::verbose() # Remove this line to suppress the console updates.
)

raw_text
```


```{r}
mydata <- redcap_read_oneshot(redcap_uri = redcap_uri, token = token)$data

display(mydata)

```
